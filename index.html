<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HogRider Rocket Test</title>
<style>
  body { margin:0; overflow:hidden; background:#071026; }
  canvas { display:block; margin:0 auto; background:#37597a; }
  #hud { position:fixed; top:10px; left:10px; color:white; font-size:18px; }
  button { font-size:16px; margin-left:6px; position:fixed; top:10px; right:10px; }
</style>
</head>
<body>
<div id="hud">
Score: <span id="score">0</span>
</div>
<button id="startBtn">Start</button>
<canvas id="gameCanvas" width="900" height="420"></canvas>
<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
const W = canvas.width, H = canvas.height;
const groundY = H - 80;

const scoreEl = document.getElementById('score');
const startBtn = document.getElementById('startBtn');

let state = 'menu'; // menu, running, cutscene, victory
let score = 0;

// Player
const player = { x:140, y:groundY-48, w:48, h:48, vy:0, onGround:true };
const gravity = 1.0, jumpVel = -15;

// Rocket
let rocket = null;

// Input
function inputJump(){ 
  if(state!=='running') return;
  if(player.onGround){ player.vy = jumpVel; player.onGround=false; }
}
window.addEventListener('keydown', e=>{ if(e.code==='Space') inputJump(); });
window.addEventListener('touchstart', e=>{ e.preventDefault(); inputJump(); }, {passive:false});

// Update
let lastTime = performance.now();
function update(dt){
  if(state==='running'){
    // simple jump physics
    player.vy += gravity*(dt/16.67);
    player.y += player.vy*(dt/16.67);
    if(player.y >= groundY-player.h){ player.y = groundY-player.h; player.vy=0; player.onGround=true; }

    // score increase
    score += 10*(dt/16.67);
    scoreEl.textContent = Math.floor(score);

    if(score >= 2000 && !rocket){ 
      state = 'cutscene';
      rocket = { x:player.x-12, y:player.y-20, vy:-1 };
    }
  }

  // rocket cutscene
  if(state==='cutscene' && rocket){
    rocket.y += rocket.vy*(dt/16.67);
    rocket.x += 6*(dt/16.67);
    if(rocket.x > W+60){ state='victory'; }
  }
}

// Draw
function draw(){
  ctx.clearRect(0,0,W,H);

  // ground
  ctx.fillStyle='#2b2f33'; ctx.fillRect(0, groundY, W, H-groundY);

  // player
  if(state!=='cutscene') ctx.fillStyle='orange'; 
  else ctx.fillStyle='red';
  const px = (rocket && state==='cutscene') ? rocket.x : player.x;
  const py = (rocket && state==='cutscene') ? rocket.y : player.y;
  ctx.fillRect(px, py, player.w, player.h);

  // victory text
  if(state==='victory'){
    ctx.fillStyle='rgba(0,0,0,0.6)'; ctx.fillRect(0,0,W,H);
    ctx.fillStyle='white'; ctx.font='36px sans-serif';
    ctx.fillText('ROCKET LAUNCH! You win!', W/2-220,H/2-20);
  }
}

// Game loop
function loop(now){
  const dt = now-lastTime; lastTime=now;
  update(dt);
  draw();
  requestAnimationFrame(loop);
}
requestAnimationFrame(loop);

// Controls
startBtn.addEventListener('click', ()=>{ if(state==='menu') state='running'; });
</script>
</body>
</html>
